<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Task Board</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 2rem;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
    }

    .header {
      color: white;
      margin-bottom: 2rem;
    }

    .header h1 {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }

    .header p {
      font-size: 1.1rem;
      opacity: 0.9;
    }

    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .stat-card {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .stat-card .number {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 0.25rem;
    }

    .stat-card .label {
      color: #6b7280;
      font-size: 0.875rem;
    }

    .stat-total .number { color: #1f2937; }
    .stat-progress .number { color: #3b82f6; }
    .stat-completed .number { color: #10b981; }
    .stat-overdue .number { color: #ef4444; }

    .filters {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 2rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      align-items: center;
    }

    .search-box {
      flex: 1;
      min-width: 250px;
      position: relative;
    }

    .search-box input {
      width: 100%;
      padding: 0.75rem 1rem 0.75rem 2.5rem;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      font-size: 0.95rem;
    }

    .search-icon {
      position: absolute;
      left: 0.75rem;
      top: 50%;
      transform: translateY(-50%);
      color: #9ca3af;
    }

    select {
      padding: 0.75rem 1rem;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      font-size: 0.95rem;
      background: white;
      cursor: pointer;
    }

    .board {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1.5rem;
    }

    .column {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .column-header {
      font-size: 1.125rem;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .column-count {
      font-size: 0.875rem;
      color: #6b7280;
      font-weight: 400;
    }

    .task-list {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .task-card {
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      padding: 1rem;
      transition: all 0.2s;
    }

    .task-card:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      transform: translateY(-2px);
    }

    .task-title {
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 0.5rem;
      font-size: 0.95rem;
    }

    .task-description {
      color: #6b7280;
      font-size: 0.875rem;
      margin-bottom: 0.75rem;
      line-height: 1.4;
    }

    .task-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .badge {
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
    }

    .priority-critical {
      background: #fee2e2;
      color: #991b1b;
      border: 1px solid #fca5a5;
    }

    .priority-high {
      background: #fed7aa;
      color: #9a3412;
      border: 1px solid #fdba74;
    }

    .priority-medium {
      background: #fef3c7;
      color: #92400e;
      border: 1px solid #fde68a;
    }

    .priority-low {
      background: #d1fae5;
      color: #065f46;
      border: 1px solid #a7f3d0;
    }

    .due-date {
      background: #dbeafe;
      color: #1e40af;
      border: 1px solid #93c5fd;
    }

    .due-date.overdue {
      background: #fee2e2;
      color: #991b1b;
      border: 1px solid #fca5a5;
    }

    .tag {
      background: #e9d5ff;
      color: #6b21a8;
      border: 1px solid #d8b4fe;
    }

    .task-notes {
      margin-top: 0.75rem;
      padding-top: 0.75rem;
      border-top: 1px solid #e5e7eb;
      font-size: 0.75rem;
      color: #6b7280;
      font-style: italic;
    }

    .loading {
      text-align: center;
      color: white;
      font-size: 1.5rem;
      padding: 4rem;
    }

    .error {
      background: #fee2e2;
      color: #991b1b;
      padding: 1rem;
      border-radius: 8px;
      margin: 2rem auto;
      max-width: 600px;
    }

    @media (max-width: 1024px) {
      .board {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>My Task Board</h1>
      <p>AI-assisted task management system</p>
    </div>

    <div id="stats" class="stats"></div>
    
    <div class="filters">
      <div class="search-box">
        <span class="search-icon">üîç</span>
        <input type="text" id="searchInput" placeholder="Search tasks...">
      </div>
      <select id="statusFilter">
        <option value="all">All Status</option>
        <option value="todo">To Do</option>
        <option value="in-progress">In Progress</option>
        <option value="completed">Completed</option>
      </select>
      <select id="priorityFilter">
        <option value="all">All Priorities</option>
        <option value="critical">Critical</option>
        <option value="high">High</option>
        <option value="medium">Medium</option>
        <option value="low">Low</option>
      </select>
    </div>

    <div id="board" class="board">
      <div class="loading">Loading tasks...</div>
    </div>
  </div>

  <script>
    let allTasks = [];
    let searchTerm = '';
    let statusFilter = 'all';
    let priorityFilter = 'all';

    // Load tasks from JSON file
    async function loadTasks() {
      try {
        const response = await fetch('tasks.json');
        const data = await response.json();
        allTasks = data.tasks;
        renderStats();
        renderBoard();
      } catch (error) {
        document.getElementById('board').innerHTML = `
          <div class="error">
            <strong>Error loading tasks:</strong> ${error.message}
            <br><br>
            Make sure tasks.json is in the same directory as index.html
          </div>
        `;
      }
    }

    function renderStats() {
      const total = allTasks.length;
      const completed = allTasks.filter(t => t.status === 'completed').length;
      const inProgress = allTasks.filter(t => t.status === 'in-progress').length;
      const overdue = allTasks.filter(t => 
        t.status !== 'completed' && t.dueDate && new Date(t.dueDate) < new Date()
      ).length;

      document.getElementById('stats').innerHTML = `
        <div class="stat-card stat-total">
          <div class="number">${total}</div>
          <div class="label">Total Tasks</div>
        </div>
        <div class="stat-card stat-progress">
          <div class="number">${inProgress}</div>
          <div class="label">In Progress</div>
        </div>
        <div class="stat-card stat-completed">
          <div class="number">${completed}</div>
          <div class="label">Completed</div>
        </div>
        <div class="stat-card stat-overdue">
          <div class="number">${overdue}</div>
          <div class="label">Overdue</div>
        </div>
      `;
    }

    function filterTasks() {
      return allTasks.filter(task => {
        const matchesSearch = !searchTerm || 
          task.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
          task.description.toLowerCase().includes(searchTerm.toLowerCase()) ||
          task.tags.some(tag => tag.toLowerCase().includes(searchTerm.toLowerCase()));
        
        const matchesStatus = statusFilter === 'all' || task.status === statusFilter;
        const matchesPriority = priorityFilter === 'all' || task.priority === priorityFilter;
        
        return matchesSearch && matchesStatus && matchesPriority;
      });
    }

    function isOverdue(dueDate) {
      if (!dueDate) return false;
      return new Date(dueDate) < new Date();
    }

    function formatDate(dateString) {
      if (!dateString) return '';
      return new Date(dateString).toLocaleDateString('en-US', { 
        month: 'short', 
        day: 'numeric',
        year: 'numeric'
      });
    }

    function renderBoard() {
      const filtered = filterTasks();
      const tasksByStatus = {
        'todo': filtered.filter(t => t.status === 'todo'),
        'in-progress': filtered.filter(t => t.status === 'in-progress'),
        'completed': filtered.filter(t => t.status === 'completed')
      };

      const statusLabels = {
        'todo': 'To Do',
        'in-progress': 'In Progress',
        'completed': 'Completed'
      };

      let boardHTML = '';
      
      for (const [status, label] of Object.entries(statusLabels)) {
        const tasks = tasksByStatus[status];
        
        boardHTML += `
          <div class="column">
            <div class="column-header">
              ${label}
              <span class="column-count">(${tasks.length})</span>
            </div>
            <div class="task-list">
              ${tasks.map(task => `
                <div class="task-card">
                  <div class="task-title">${task.title}</div>
                  ${task.description ? `<div class="task-description">${task.description}</div>` : ''}
                  <div class="task-meta">
                    <span class="badge priority-${task.priority}">${task.priority.toUpperCase()}</span>
                    ${task.dueDate ? `
                      <span class="badge due-date ${isOverdue(task.dueDate) && task.status !== 'completed' ? 'overdue' : ''}">
                        üìÖ ${formatDate(task.dueDate)}
                      </span>
                    ` : ''}
                    ${task.tags.map(tag => `<span class="badge tag">üè∑Ô∏è ${tag}</span>`).join('')}
                  </div>
                  ${task.notes ? `<div class="task-notes">${task.notes}</div>` : ''}
                </div>
              `).join('') || '<div style="color: #9ca3af; text-align: center; padding: 2rem;">No tasks</div>'}
            </div>
          </div>
        `;
      }

      document.getElementById('board').innerHTML = boardHTML;
    }

    // Event listeners
    document.addEventListener('DOMContentLoaded', () => {
      loadTasks();

      document.getElementById('searchInput').addEventListener('input', (e) => {
        searchTerm = e.target.value;
        renderBoard();
      });

      document.getElementById('statusFilter').addEventListener('change', (e) => {
        statusFilter = e.target.value;
        renderBoard();
      });

      document.getElementById('priorityFilter').addEventListener('change', (e) => {
        priorityFilter = e.target.value;
        renderBoard();
      });
    });
  </script>
</body>
</html>
